function createPlugin(a){function b(){for(var b=a.theme.panel.settings.items,c=0;c<b.length;c++){var d=b[c];if("menubar"===d.type)return d.items}}function c(a){try{for(var c=b(),d=0;d<c.length;d++){var e=c[d];if(e.text.toLowerCase()===a.toLowerCase())return e}}catch(f){throw new Error("Can't find the menu "+a+" in menu bar")}}function d(){for(var b=a.theme.panel.settings.items,c=0;c<b.length;c++){var d=b[c];if("panel"===d.type&&"toolbar-grp"===d.classes)return d.items}}this.getMenubar=b,this.getMenuByName=c,this.getToolbars=d,$("body").on("menusController:mceMenuRendered",function(a,b){$(b).find(".mce-menu-item").each(function(a,c){$(b).trigger("menusController:mceMenuItemRendered:"+$(c).attr("id"))})}),observeMenuRendering()}function observeMenuRendering(){function a(a){a.forEach(function(a){var c=$(a.addedNodes).filter(b);if(c.length){if(c.length>1)throw new Error("ERROR: there is many menus rendered ! This case is not implemented !");var d=$.Event("menusController:mceMenuRendered");$("body").trigger(d,c[0])}})}var b=".mce-container.mce-panel.mce-floatpanel.mce-menu",c=document.querySelector("body"),d=new MutationObserver(a),e={childList:!0};d.observe(c,e)}var MutationObserver=window.MutationObserver,$=window.$,tinymce=window.tinymce;tinymce.PluginManager.add("menuscontroller",createPlugin);